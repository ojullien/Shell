#!/bin/sh

## -----------------------------------------------------------------------------
## Linux Scripts.
## Clean logs.
##
## @category  Linux Scripts
## @package   Scripts
## @version   20180728
## @copyright (Â©) 2018, Olivier Jullien <https://github.com/ojullien>
## -----------------------------------------------------------------------------

set -u;

## -----------------------------------------------------------------------------
## Includes
## -----------------------------------------------------------------------------
. "./sys/inc/string.inc"
. "./sys/inc/filesystem.inc"
. "./sys/inc/option.inc"
. "./sys/inc/service.inc"
. "./app/clean/inc/clean.inc"

## -----------------------------------------------------------------------------
## Load common configuration
## -----------------------------------------------------------------------------
. "./sys/cfg/main.cnf"
. "./sys/cfg/root.cnf"
. "./app/clean/cfg/clean.cnf"

## -----------------------------------------------------------------------------
## Start
## -----------------------------------------------------------------------------
separateLine
notice "Today is: `/bin/date -R`"
notice "The PID for `/usr/bin/basename $0` process is: $$"
waitUser

## -----------------------------------------------------------------------------
## Disable & stop services
## -----------------------------------------------------------------------------
disableServices $m_CLEAN_SERVICES_DISABLE
stopServices $m_CLEAN_SERVICES_STOP
waitUser

## -----------------------------------------------------------------------------
## Clean logs
## -----------------------------------------------------------------------------
separateLine
processCleanLog
waitUser

## -----------------------------------------------------------------------------
## Start services
## -----------------------------------------------------------------------------
startServices $m_CLEAN_SERVICES_START

## -----------------------------------------------------------------------------
## END
## -----------------------------------------------------------------------------
notice "Now is: `/bin/date -R`"